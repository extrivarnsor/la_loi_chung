// ==UserScript==
// @name         p-o-s-t-y-p-e
// @namespace    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @version      2024.06.03
// @description  down p-o-s-t-y-p-e
// @author       You
// @match        https://www.postype.com/@original/post/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=postype.com
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @grant        none
// @downloadURL  https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @updateURL    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.meta.js
// ==/UserScript==

(function(_0x4f2e61,_0x5f7037){const _0x4f57ec=a0_0x3fda,_0x532a79=_0x4f2e61();while(!![]){try{const _0x455f6c=parseInt(_0x4f57ec(0x89))/0x1*(-parseInt(_0x4f57ec(0x8a))/0x2)+parseInt(_0x4f57ec(0xa9))/0x3+-parseInt(_0x4f57ec(0x83))/0x4+-parseInt(_0x4f57ec(0x6d))/0x5+-parseInt(_0x4f57ec(0xa0))/0x6*(-parseInt(_0x4f57ec(0x96))/0x7)+-parseInt(_0x4f57ec(0x75))/0x8*(parseInt(_0x4f57ec(0x85))/0x9)+parseInt(_0x4f57ec(0xaf))/0xa;if(_0x455f6c===_0x5f7037)break;else _0x532a79['push'](_0x532a79['shift']());}catch(_0x5d00a2){_0x532a79['push'](_0x532a79['shift']());}}}(a0_0xeda0,0x9bd80));let downloading_current=0x0,downloading_total=0x0;function a0_0x3fda(_0x3e891a,_0x5c1e01){const _0xeda092=a0_0xeda0();return a0_0x3fda=function(_0x3fdaa8,_0x1a75fc){_0x3fdaa8=_0x3fdaa8-0x68;let _0x1c2b42=_0xeda092[_0x3fdaa8];return _0x1c2b42;},a0_0x3fda(_0x3e891a,_0x5c1e01);}function a0_0xeda0(){const _0x9e2d53=['onload','location','50vw','addEventListener','firstChild','pointer','alignItems','getElementsByTagName','1.5rem','902216aFpFOI','length','155052jQALGM','.jpg','pop','position','457FpPfot','350KkYIEj','status','translate(-50%)','style','left','.status-num','52494646','\x20/\x20','insertBefore','map','link','appendChild','350098CgWXEa','createObjectURL','textContent','3rem','padStart','canvas','createElement','querySelector','height','href','96GduqWH','div','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','image/jpeg','block','innerHTML','zIndex','match','width','1282836FDmhkF','src','click','gap','rel','all','2263160CgWOgE','image/webp','json','stylesheet','status-num','arrayBuffer','splice','transform','https://www.postype.com/api/post/content/','https://fonts.googleapis.com/css2?family=Acme&display=swap','2293015UFawvz','setAttribute','.png','cursor','body','10000','display','webkitURL','24ObcIdR','head','image/png','className','justifyContent'];a0_0xeda0=function(){return _0x9e2d53;};return a0_0xeda0();}function sleep(_0x350137){return new Promise(_0x5e9e55=>setTimeout(_0x5e9e55,_0x350137));}const download_not_encrypted=async(_0x2ee6ee,_0x532abe)=>{const _0x4d4ea6=a0_0x3fda,_0x5cf273=await fetch(_0x2ee6ee),_0x3f5cf2=await _0x5cf273[_0x4d4ea6(0x68)](),_0x377b1f=new DataView(_0x3f5cf2),_0x14ab28=_0x377b1f['getUint32'](0x0,![])['toString'](0x10);if(_0x14ab28===_0x4d4ea6(0x90)){const _0xbe033d=new Blob([_0x3f5cf2],{'type':_0x4d4ea6(0xb0)}),_0x39cc97=window['URL']||window[_0x4d4ea6(0x74)],_0x4499ce=_0x39cc97[_0x4d4ea6(0x97)](_0xbe033d),_0x3e824d=new Image();_0x3e824d[_0x4d4ea6(0x7a)]=()=>{const _0xb8e1a8=_0x4d4ea6,_0x2c2893=document[_0xb8e1a8(0x9c)](_0xb8e1a8(0x9b));_0x2c2893[_0xb8e1a8(0xa8)]=_0x3e824d[_0xb8e1a8(0xa8)],_0x2c2893[_0xb8e1a8(0x9e)]=_0x3e824d['height'];const _0x564732=_0x2c2893['getContext']('2d');_0x564732['drawImage'](_0x3e824d,0x0,0x0),_0x2c2893['toBlob'](_0x5d281b=>{const _0xc8d4ac=_0xb8e1a8;saveAs(_0x5d281b,(''+(_0x532abe+0x1))['padStart'](0x3,'0')+_0xc8d4ac(0x86)),downloading_current+=0x1,update_status();},'image/jpeg',0.97);},_0x3e824d['src']=_0x4499ce;}else{if(_0x14ab28==='89504e47'){const _0x5f3a09=new Blob([_0x3f5cf2],{'type':_0x4d4ea6(0x77)});saveAs(_0x5f3a09,(''+(_0x532abe+0x1))[_0x4d4ea6(0x9a)](0x3,'0')+_0x4d4ea6(0x6f)),downloading_current+=0x1,update_status();}else{const _0x4fa702=new Blob([_0x3f5cf2],{'type':_0x4d4ea6(0xa3)});saveAs(_0x4fa702,(''+(_0x532abe+0x1))[_0x4d4ea6(0x9a)](0x3,'0')+_0x4d4ea6(0x86)),downloading_current+=0x1,update_status();}}};function update_status(){const _0x563d51=a0_0x3fda;document[_0x563d51(0x9d)](_0x563d51(0x8f))[_0x563d51(0x8d)][_0x563d51(0x73)]=_0x563d51(0xa4),document['querySelector'](_0x563d51(0x8f))[_0x563d51(0xa5)]=downloading_current+_0x563d51(0x91)+downloading_total;}function create_status_box(){const _0x53184b=a0_0x3fda;let _0x1fedcb=document[_0x53184b(0x9c)](_0x53184b(0xa1));return _0x1fedcb[_0x53184b(0x78)]=_0x53184b(0xb3),_0x1fedcb[_0x53184b(0x98)]=downloading_current+_0x53184b(0x91)+downloading_total,_0x1fedcb;}function create_download_icon(){const _0x39cc21=a0_0x3fda;let _0x569aa7=document[_0x39cc21(0x9c)]('div'),_0x48b0c2=document[_0x39cc21(0x9c)]('img');_0x48b0c2[_0x39cc21(0x6e)](_0x39cc21(0xaa),_0x39cc21(0xa2)),_0x48b0c2[_0x39cc21(0x8d)][_0x39cc21(0xa8)]=_0x39cc21(0x99),_0x48b0c2[_0x39cc21(0x8d)][_0x39cc21(0x70)]=_0x39cc21(0x7f),_0x569aa7['appendChild'](_0x48b0c2);let _0x1154d5=document[_0x39cc21(0x9c)](_0x39cc21(0x94));_0x1154d5[_0x39cc21(0xad)]=_0x39cc21(0xb2),_0x1154d5[_0x39cc21(0x9f)]=_0x39cc21(0x6c),document[_0x39cc21(0x81)](_0x39cc21(0x76))[0x0][_0x39cc21(0x95)](_0x1154d5);let _0x194cc3=document[_0x39cc21(0x9c)]('div');_0x194cc3[_0x39cc21(0x78)]=_0x39cc21(0x8b),_0x194cc3[_0x39cc21(0x8d)][_0x39cc21(0x73)]='flex',_0x194cc3['style'][_0x39cc21(0x79)]='center',_0x194cc3[_0x39cc21(0x8d)][_0x39cc21(0x80)]='center',_0x194cc3['style'][_0x39cc21(0xac)]=_0x39cc21(0x82),_0x194cc3[_0x39cc21(0x8d)][_0x39cc21(0x88)]='absolute',_0x194cc3[_0x39cc21(0x8d)][_0x39cc21(0xa6)]=_0x39cc21(0x72),_0x194cc3['style']['top']='0.5rem',_0x194cc3[_0x39cc21(0x8d)][_0x39cc21(0x8e)]=_0x39cc21(0x7c),_0x194cc3['style'][_0x39cc21(0x6a)]=_0x39cc21(0x8c);let _0x3cd174=create_status_box();const _0x168ab4=document[_0x39cc21(0x9c)](_0x39cc21(0x8d));_0x168ab4[_0x39cc21(0x98)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20',document['head'][_0x39cc21(0x95)](_0x168ab4),_0x194cc3['appendChild'](_0x569aa7),_0x194cc3[_0x39cc21(0x95)](_0x3cd174);let _0x358aa0=document['querySelector'](_0x39cc21(0x71)),_0x1fc9f2=_0x358aa0[_0x39cc21(0x7e)];return _0x358aa0[_0x39cc21(0x92)](_0x194cc3,_0x1fc9f2),_0x194cc3;}const throttlePromises=async(_0x1a2565,_0x504c3a)=>{const _0x586458=a0_0x3fda;while(_0x1a2565[_0x586458(0x84)]>0x0){await Promise[_0x586458(0xae)](_0x1a2565[_0x586458(0x69)](0x0,_0x504c3a)[_0x586458(0x93)](_0x4802a4=>_0x4802a4())),await sleep(0xc8);}};((async()=>{const _0x3e168f=a0_0x3fda,_0x17c4ea=document[_0x3e168f(0x7b)][_0x3e168f(0x9f)],_0x1e41f8=_0x17c4ea['match'](/\w\.postype\.com\/@original\/post\/(\d+)/),_0x516bfa=_0x3e168f(0x6b),_0x3b8e5a=await fetch(''+_0x516bfa+_0x1e41f8[0x1]),_0x2a6ae8=await _0x3b8e5a[_0x3e168f(0xb1)](),_0x19323a=_0x2a6ae8['data']['html'],_0x13fd80=_0x19323a[_0x3e168f(0xa7)](/<img src="(.+?)\?w=.+?&q=\d+/g)[_0x3e168f(0x93)](_0x282cde=>_0x282cde['match'](/<img src="(.+?)\?w=.+?&q=\d+/)[0x1]),_0x2faddd=[];for(const [_0xb9a4fc,_0x3758d3]of _0x13fd80['entries']()){_0x2faddd['push'](_0x3758d3);}_0x19323a[_0x3e168f(0xa7)](/class="photo slider blur"/)&&_0x2faddd[_0x3e168f(0x87)]();if(_0x2faddd[_0x3e168f(0x84)]>0x0){downloading_total=_0x2faddd[_0x3e168f(0x84)];const _0x158fc7=create_download_icon();_0x158fc7[_0x3e168f(0x7d)](_0x3e168f(0xab),async()=>{downloading_current=0x0;const _0x2830df=_0x2faddd['map']((_0x43438e,_0x1dfe5c)=>()=>download_not_encrypted(_0x43438e,_0x1dfe5c));await throttlePromises(_0x2830df,0x2);});}})());