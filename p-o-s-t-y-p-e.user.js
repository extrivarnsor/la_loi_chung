// ==UserScript==
// @name         p-o-s-t-y-p-e
// @namespace    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @version      2024.06.04
// @description  down p-o-s-t-y-p-e
// @author       You
// @include      /^https://www.postype.com/@.+?/post/*/
// @icon         https://www.google.com/s2/favicons?sz=64&domain=postype.com
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @grant        none
// @downloadURL  https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @updateURL    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.meta.js
// ==/UserScript==

(function(_0x185756,_0x44274b){const _0x3a8c6f=a0_0x39fd,_0x5623df=_0x185756();while(!![]){try{const _0x1ea986=-parseInt(_0x3a8c6f(0x1c5))/0x1+-parseInt(_0x3a8c6f(0x206))/0x2*(parseInt(_0x3a8c6f(0x1c9))/0x3)+parseInt(_0x3a8c6f(0x1ff))/0x4+-parseInt(_0x3a8c6f(0x1ca))/0x5*(parseInt(_0x3a8c6f(0x1cb))/0x6)+parseInt(_0x3a8c6f(0x1dc))/0x7+parseInt(_0x3a8c6f(0x1ec))/0x8+parseInt(_0x3a8c6f(0x1ef))/0x9*(parseInt(_0x3a8c6f(0x201))/0xa);if(_0x1ea986===_0x44274b)break;else _0x5623df['push'](_0x5623df['shift']());}catch(_0xb69bce){_0x5623df['push'](_0x5623df['shift']());}}}(a0_0x49b3,0x4ea03));let downloading_current=0x0,downloading_total=0x0;function sleep(_0x41e5c4){return new Promise(_0x186488=>setTimeout(_0x186488,_0x41e5c4));}const download_not_encrypted=async(_0x233e5a,_0x593470)=>{const _0x2fe6ca=a0_0x39fd,_0x54d402=await fetch(_0x233e5a),_0x17b945=await _0x54d402[_0x2fe6ca(0x207)](),_0x2617b6=new DataView(_0x17b945),_0x4cad02=_0x2617b6['getUint32'](0x0,![])[_0x2fe6ca(0x210)](0x10);if(_0x4cad02===_0x2fe6ca(0x1e4)){const _0x478959=new Blob([_0x17b945],{'type':_0x2fe6ca(0x1c7)}),_0x4af456=window[_0x2fe6ca(0x1fb)]||window[_0x2fe6ca(0x20d)],_0x315b54=_0x4af456[_0x2fe6ca(0x1d1)](_0x478959),_0x27e45d=new Image();_0x27e45d[_0x2fe6ca(0x1fa)]=()=>{const _0x26a4f4=_0x2fe6ca,_0x5e0727=document[_0x26a4f4(0x1d8)](_0x26a4f4(0x203));_0x5e0727[_0x26a4f4(0x1f3)]=_0x27e45d[_0x26a4f4(0x1f3)],_0x5e0727[_0x26a4f4(0x1e5)]=_0x27e45d['height'];const _0x4d516e=_0x5e0727[_0x26a4f4(0x202)]('2d');_0x4d516e['drawImage'](_0x27e45d,0x0,0x0),_0x5e0727[_0x26a4f4(0x1d7)](_0x30d8a0=>{const _0x2d569e=_0x26a4f4;saveAs(_0x30d8a0,(''+(_0x593470+0x1))[_0x2d569e(0x1f0)](0x3,'0')+_0x2d569e(0x1ed)),downloading_current+=0x1,update_status();},_0x26a4f4(0x1c8),0.97);},_0x27e45d[_0x2fe6ca(0x211)]=_0x315b54;}else{if(_0x4cad02===_0x2fe6ca(0x1df)){const _0x1b87bf=new Blob([_0x17b945],{'type':_0x2fe6ca(0x1fc)});saveAs(_0x1b87bf,(''+(_0x593470+0x1))[_0x2fe6ca(0x1f0)](0x3,'0')+_0x2fe6ca(0x20c)),downloading_current+=0x1,update_status();}else{const _0x1f4fd1=new Blob([_0x17b945],{'type':_0x2fe6ca(0x1c8)});saveAs(_0x1f4fd1,(''+(_0x593470+0x1))[_0x2fe6ca(0x1f0)](0x3,'0')+_0x2fe6ca(0x1ed)),downloading_current+=0x1,update_status();}}};function update_status(){const _0x4dee0f=a0_0x39fd;document[_0x4dee0f(0x209)](_0x4dee0f(0x1d0))[_0x4dee0f(0x1d6)]['display']='block',document[_0x4dee0f(0x209)]('.status-num')[_0x4dee0f(0x1d2)]=downloading_current+_0x4dee0f(0x1de)+downloading_total;}function create_status_box(){const _0x4f8078=a0_0x39fd;let _0x2bce34=document['createElement']('div');return _0x2bce34[_0x4f8078(0x1f5)]='status-num',_0x2bce34['textContent']=downloading_current+'\x20/\x20'+downloading_total,_0x2bce34;}function create_download_icon(){const _0x3a7f3c=a0_0x39fd;let _0x4bc08e=document[_0x3a7f3c(0x1d8)]('div'),_0x27d2aa=document[_0x3a7f3c(0x1d8)](_0x3a7f3c(0x1e3));_0x27d2aa['setAttribute'](_0x3a7f3c(0x211),_0x3a7f3c(0x20b)),_0x27d2aa['style'][_0x3a7f3c(0x1f3)]=_0x3a7f3c(0x1eb),_0x27d2aa['style']['cursor']='pointer',_0x4bc08e[_0x3a7f3c(0x1f1)](_0x27d2aa);let _0x1e735b=document[_0x3a7f3c(0x1d8)](_0x3a7f3c(0x1c3));_0x1e735b['rel']=_0x3a7f3c(0x1e2),_0x1e735b[_0x3a7f3c(0x1f7)]=_0x3a7f3c(0x1d5),document[_0x3a7f3c(0x1db)](_0x3a7f3c(0x1f4))[0x0][_0x3a7f3c(0x1f1)](_0x1e735b);let _0x12b327=document[_0x3a7f3c(0x1d8)]('div');_0x12b327[_0x3a7f3c(0x1f5)]=_0x3a7f3c(0x1e1),_0x12b327['style'][_0x3a7f3c(0x1e8)]=_0x3a7f3c(0x1d3),_0x12b327['style'][_0x3a7f3c(0x1dd)]=_0x3a7f3c(0x1da),_0x12b327[_0x3a7f3c(0x1d6)][_0x3a7f3c(0x205)]=_0x3a7f3c(0x1da),_0x12b327[_0x3a7f3c(0x1d6)][_0x3a7f3c(0x212)]='1.5rem',_0x12b327['style'][_0x3a7f3c(0x20a)]=_0x3a7f3c(0x1e0),_0x12b327['style']['zIndex']='10000',_0x12b327['style'][_0x3a7f3c(0x1c4)]=_0x3a7f3c(0x1ce),_0x12b327[_0x3a7f3c(0x1d6)][_0x3a7f3c(0x1fd)]=_0x3a7f3c(0x1e6),_0x12b327[_0x3a7f3c(0x1d6)][_0x3a7f3c(0x204)]=_0x3a7f3c(0x1f8);let _0x12305d=create_status_box();const _0x2b908f=document[_0x3a7f3c(0x1d8)](_0x3a7f3c(0x1d6));_0x2b908f[_0x3a7f3c(0x1d4)]=_0x3a7f3c(0x1fe),document['head'][_0x3a7f3c(0x1f1)](_0x2b908f),_0x12b327[_0x3a7f3c(0x1f1)](_0x4bc08e),_0x12b327[_0x3a7f3c(0x1f1)](_0x12305d);let _0x1546e0=document[_0x3a7f3c(0x209)](_0x3a7f3c(0x1d9)),_0x9b70b6=_0x1546e0[_0x3a7f3c(0x1f6)];return _0x1546e0[_0x3a7f3c(0x208)](_0x12b327,_0x9b70b6),_0x12b327;}const throttlePromises=async(_0x313386,_0x5bad10)=>{const _0x2a4b68=a0_0x39fd;while(_0x313386[_0x2a4b68(0x1cd)]>0x0){await Promise[_0x2a4b68(0x20f)](_0x313386[_0x2a4b68(0x200)](0x0,_0x5bad10)[_0x2a4b68(0x1e7)](_0x2fe800=>_0x2fe800())),await sleep(0xc8);}};((async()=>{const _0x1a8d0e=a0_0x39fd,_0x4c82c3=document['location']['href'],_0x9658e6=_0x4c82c3['match'](/\w\.postype\.com\/@.+?\/post\/(\d+)/),_0x374516=_0x1a8d0e(0x1ee),_0xef7798=await fetch(''+_0x374516+_0x9658e6[0x1]),_0x792f92=await _0xef7798[_0x1a8d0e(0x1e9)](),_0xb63080=_0x792f92[_0x1a8d0e(0x20e)][_0x1a8d0e(0x1f2)],_0x11ada4=_0xb63080['match'](/<img src="(.+?)\?w=.+?&q=\d+/g)['map'](_0xc075b9=>_0xc075b9['match'](/<img src="(.+?)\?w=.+?&q=\d+/)[0x1]),_0x40e75b=[];for(const [_0x506f18,_0x6197fe]of _0x11ada4[_0x1a8d0e(0x1c6)]()){_0x40e75b[_0x1a8d0e(0x1cf)](_0x6197fe);}_0xb63080['match'](/class="photo slider blur"/)&&_0x40e75b[_0x1a8d0e(0x1cc)]();if(_0x40e75b[_0x1a8d0e(0x1cd)]>0x0){downloading_total=_0x40e75b[_0x1a8d0e(0x1cd)];const _0x59f283=create_download_icon();_0x59f283[_0x1a8d0e(0x1ea)](_0x1a8d0e(0x1f9),async()=>{const _0x544b3e=_0x1a8d0e;downloading_current=0x0;const _0x12145c=_0x40e75b[_0x544b3e(0x1e7)]((_0x5c0299,_0x2958e1)=>()=>download_not_encrypted(_0x5c0299,_0x2958e1));await throttlePromises(_0x12145c,0x2);});}})());function a0_0x39fd(_0x18b4e5,_0x7df0b5){const _0x49b312=a0_0x49b3();return a0_0x39fd=function(_0x39fd68,_0x4b3f32){_0x39fd68=_0x39fd68-0x1c3;let _0x46fd4d=_0x49b312[_0x39fd68];return _0x46fd4d;},a0_0x39fd(_0x18b4e5,_0x7df0b5);}function a0_0x49b3(){const _0x5429a9=['232512KlMOiK','splice','1245730dLclLv','getContext','canvas','transform','alignItems','392118hPCfxm','arrayBuffer','insertBefore','querySelector','position','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','.png','webkitURL','data','all','toString','src','gap','link','top','314479FojrHp','entries','image/webp','image/jpeg','9VOuUvZ','81695WEbVMy','222IGdfel','pop','length','0.5rem','push','.status-num','createObjectURL','innerHTML','flex','textContent','https://fonts.googleapis.com/css2?family=Acme&display=swap','style','toBlob','createElement','body','center','getElementsByTagName','4351809gJtbbT','justifyContent','\x20/\x20','89504e47','absolute','status','stylesheet','img','52494646','height','50vw','map','display','json','addEventListener','3rem','4212560OcZqeU','.jpg','https://www.postype.com/api/post/content/','45EYsaSV','padStart','appendChild','html','width','head','className','firstChild','href','translate(-50%)','click','onload','URL','image/png','left','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20'];a0_0x49b3=function(){return _0x5429a9;};return a0_0x49b3();}