// ==UserScript==
// @name         p-o-s-t-y-p-e
// @namespace    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @version      2024.06.03.1
// @description  down p-o-s-t-y-p-e
// @author       You
// @include      /^https://www.postype.com/@\w+/post/*/
// @icon         https://www.google.com/s2/favicons?sz=64&domain=postype.com
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @grant        none
// @downloadURL  https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @updateURL    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.meta.js
// ==/UserScript==

(function(_0x4a2645,_0x365a84){const _0x3aaa7a=a0_0x3d5c,_0x434d5e=_0x4a2645();while(!![]){try{const _0x79636=parseInt(_0x3aaa7a(0x13d))/0x1+-parseInt(_0x3aaa7a(0x116))/0x2*(-parseInt(_0x3aaa7a(0x131))/0x3)+parseInt(_0x3aaa7a(0x11d))/0x4*(parseInt(_0x3aaa7a(0x106))/0x5)+-parseInt(_0x3aaa7a(0x139))/0x6*(-parseInt(_0x3aaa7a(0x11e))/0x7)+parseInt(_0x3aaa7a(0x122))/0x8*(-parseInt(_0x3aaa7a(0x119))/0x9)+-parseInt(_0x3aaa7a(0x136))/0xa*(-parseInt(_0x3aaa7a(0x104))/0xb)+parseInt(_0x3aaa7a(0x12b))/0xc*(-parseInt(_0x3aaa7a(0xf2))/0xd);if(_0x79636===_0x365a84)break;else _0x434d5e['push'](_0x434d5e['shift']());}catch(_0x4533ad){_0x434d5e['push'](_0x434d5e['shift']());}}}(a0_0x2884,0x9efdf));let downloading_current=0x0,downloading_total=0x0;function a0_0x2884(){const _0x1f8bca=['length','appendChild','div','0.5rem','toString','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','URL','89504e47','276dUCOPg','alignItems','pointer','https://www.postype.com/api/post/content/','center','all','427080BAzDST','\x20/\x20','getElementsByTagName','rel','setAttribute','160140wUXzAR','3rem','entries','116262njwXHr','map','getContext','flex','61688bCiUzH','arrayBuffer','webkitURL','display','block','886834durvqL','image/webp','10000','src','cursor','zIndex','image/jpeg','gap','justifyContent','getUint32','body','className','style','.jpg','stylesheet','onload','match','href','605qoFhRt','translate(-50%)','26635VCKJKR','data','html','push','drawImage','.status-num','createObjectURL','status-num','https://fonts.googleapis.com/css2?family=Acme&display=swap','width','createElement','1.5rem','head','querySelector','textContent','image/png','12gOortU','insertBefore','transform','6862473DbAYhp','json','50vw','.png','556VQoDzI','161pUkPUk','addEventListener','status','padStart','8zJMwvY'];a0_0x2884=function(){return _0x1f8bca;};return a0_0x2884();}function sleep(_0x1ec4aa){return new Promise(_0x884ab=>setTimeout(_0x884ab,_0x1ec4aa));}const download_not_encrypted=async(_0x5e027e,_0x1af072)=>{const _0x1aba58=a0_0x3d5c,_0xd19266=await fetch(_0x5e027e),_0x4cb692=await _0xd19266[_0x1aba58(0x13e)](),_0x2b5a78=new DataView(_0x4cb692),_0x2ea9e5=_0x2b5a78[_0x1aba58(0xfb)](0x0,![])[_0x1aba58(0x127)](0x10);if(_0x2ea9e5==='52494646'){const _0xfd7ffd=new Blob([_0x4cb692],{'type':_0x1aba58(0xf3)}),_0x561fa4=window[_0x1aba58(0x129)]||window[_0x1aba58(0x13f)],_0x18b584=_0x561fa4[_0x1aba58(0x10c)](_0xfd7ffd),_0x434088=new Image();_0x434088[_0x1aba58(0x101)]=()=>{const _0xefe7b6=_0x1aba58,_0x3d0019=document[_0xefe7b6(0x110)]('canvas');_0x3d0019[_0xefe7b6(0x10f)]=_0x434088['width'],_0x3d0019['height']=_0x434088['height'];const _0x3480ee=_0x3d0019[_0xefe7b6(0x13b)]('2d');_0x3480ee[_0xefe7b6(0x10a)](_0x434088,0x0,0x0),_0x3d0019['toBlob'](_0x286920=>{const _0x5cf3d1=_0xefe7b6;saveAs(_0x286920,(''+(_0x1af072+0x1))[_0x5cf3d1(0x121)](0x3,'0')+_0x5cf3d1(0xff)),downloading_current+=0x1,update_status();},_0xefe7b6(0xf8),0.97);},_0x434088[_0x1aba58(0xf5)]=_0x18b584;}else{if(_0x2ea9e5===_0x1aba58(0x12a)){const _0x1c3be3=new Blob([_0x4cb692],{'type':_0x1aba58(0x115)});saveAs(_0x1c3be3,(''+(_0x1af072+0x1))[_0x1aba58(0x121)](0x3,'0')+_0x1aba58(0x11c)),downloading_current+=0x1,update_status();}else{const _0x542911=new Blob([_0x4cb692],{'type':_0x1aba58(0xf8)});saveAs(_0x542911,(''+(_0x1af072+0x1))[_0x1aba58(0x121)](0x3,'0')+_0x1aba58(0xff)),downloading_current+=0x1,update_status();}}};function update_status(){const _0x215b0e=a0_0x3d5c;document[_0x215b0e(0x113)](_0x215b0e(0x10b))[_0x215b0e(0xfe)][_0x215b0e(0x140)]=_0x215b0e(0xf1),document[_0x215b0e(0x113)](_0x215b0e(0x10b))['innerHTML']=downloading_current+_0x215b0e(0x132)+downloading_total;}function create_status_box(){const _0x90c792=a0_0x3d5c;let _0x2f59b1=document['createElement'](_0x90c792(0x125));return _0x2f59b1[_0x90c792(0xfd)]=_0x90c792(0x10d),_0x2f59b1[_0x90c792(0x114)]=downloading_current+_0x90c792(0x132)+downloading_total,_0x2f59b1;}function a0_0x3d5c(_0x1f83e5,_0x32df9f){const _0x2884d5=a0_0x2884();return a0_0x3d5c=function(_0x3d5c39,_0x10b9b9){_0x3d5c39=_0x3d5c39-0xf1;let _0x45dded=_0x2884d5[_0x3d5c39];return _0x45dded;},a0_0x3d5c(_0x1f83e5,_0x32df9f);}function create_download_icon(){const _0x189338=a0_0x3d5c;let _0x118b95=document[_0x189338(0x110)](_0x189338(0x125)),_0x3fad36=document[_0x189338(0x110)]('img');_0x3fad36[_0x189338(0x135)]('src','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png'),_0x3fad36[_0x189338(0xfe)]['width']=_0x189338(0x137),_0x3fad36[_0x189338(0xfe)][_0x189338(0xf6)]=_0x189338(0x12d),_0x118b95[_0x189338(0x124)](_0x3fad36);let _0x279ce=document[_0x189338(0x110)]('link');_0x279ce[_0x189338(0x134)]=_0x189338(0x100),_0x279ce[_0x189338(0x103)]=_0x189338(0x10e),document[_0x189338(0x133)](_0x189338(0x112))[0x0][_0x189338(0x124)](_0x279ce);let _0xdbdc4=document[_0x189338(0x110)]('div');_0xdbdc4[_0x189338(0xfd)]=_0x189338(0x120),_0xdbdc4['style']['display']=_0x189338(0x13c),_0xdbdc4[_0x189338(0xfe)][_0x189338(0xfa)]=_0x189338(0x12f),_0xdbdc4[_0x189338(0xfe)][_0x189338(0x12c)]=_0x189338(0x12f),_0xdbdc4['style'][_0x189338(0xf9)]=_0x189338(0x111),_0xdbdc4[_0x189338(0xfe)]['position']='absolute',_0xdbdc4['style'][_0x189338(0xf7)]=_0x189338(0xf4),_0xdbdc4[_0x189338(0xfe)]['top']=_0x189338(0x126),_0xdbdc4[_0x189338(0xfe)]['left']=_0x189338(0x11b),_0xdbdc4[_0x189338(0xfe)][_0x189338(0x118)]=_0x189338(0x105);let _0x5f04fb=create_status_box();const _0x45c62a=document['createElement'](_0x189338(0xfe));_0x45c62a[_0x189338(0x114)]=_0x189338(0x128),document[_0x189338(0x112)][_0x189338(0x124)](_0x45c62a),_0xdbdc4['appendChild'](_0x118b95),_0xdbdc4['appendChild'](_0x5f04fb);let _0x1564a6=document[_0x189338(0x113)](_0x189338(0xfc)),_0x8c37f1=_0x1564a6['firstChild'];return _0x1564a6[_0x189338(0x117)](_0xdbdc4,_0x8c37f1),_0xdbdc4;}const throttlePromises=async(_0x1f3305,_0x4fb19c)=>{const _0x3dc200=a0_0x3d5c;while(_0x1f3305['length']>0x0){await Promise[_0x3dc200(0x130)](_0x1f3305['splice'](0x0,_0x4fb19c)['map'](_0x2ea868=>_0x2ea868())),await sleep(0xc8);}};((async()=>{const _0x39c8c2=a0_0x3d5c,_0x1110fd=document['location']['href'],_0x26f422=_0x1110fd[_0x39c8c2(0x102)](/\w\.postype\.com\/@\w+\/post\/(\d+)/),_0x127996=_0x39c8c2(0x12e),_0x31ab0a=await fetch(''+_0x127996+_0x26f422[0x1]),_0x959b21=await _0x31ab0a[_0x39c8c2(0x11a)](),_0x2acafd=_0x959b21[_0x39c8c2(0x107)][_0x39c8c2(0x108)],_0x5b1125=_0x2acafd[_0x39c8c2(0x102)](/<img src="(.+?)\?w=.+?&q=\d+/g)[_0x39c8c2(0x13a)](_0x475e72=>_0x475e72['match'](/<img src="(.+?)\?w=.+?&q=\d+/)[0x1]),_0x3419dd=[];for(const [_0x54e026,_0x463442]of _0x5b1125[_0x39c8c2(0x138)]()){_0x3419dd[_0x39c8c2(0x109)](_0x463442);}_0x2acafd[_0x39c8c2(0x102)](/class="photo slider blur"/)&&_0x3419dd['pop']();if(_0x3419dd[_0x39c8c2(0x123)]>0x0){downloading_total=_0x3419dd[_0x39c8c2(0x123)];const _0x5da104=create_download_icon();_0x5da104[_0x39c8c2(0x11f)]('click',async()=>{const _0x4c5004=_0x39c8c2;downloading_current=0x0;const _0x32f1f8=_0x3419dd[_0x4c5004(0x13a)]((_0x21a466,_0x15b0be)=>()=>download_not_encrypted(_0x21a466,_0x15b0be));await throttlePromises(_0x32f1f8,0x2);});}})());