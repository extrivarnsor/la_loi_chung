// ==UserScript==
// @name         p-o-s-t-y-p-e
// @namespace    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @version      2023.09.14
// @description  down p-o-s-t-y-p-e
// @author       You
// @match        https://original.postype.com/post/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=postype.com
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @grant        none
// @downloadURL  https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.user.js
// @updateURL    https://github.com/extrivarnsor/la_loi_chung/raw/main/p-o-s-t-y-p-e.meta.js
// ==/UserScript==

(function(_0x350b7e,_0x592e6d){const _0x560f4e=a0_0x58c4,_0x4d7608=_0x350b7e();while(!![]){try{const _0x2bc974=-parseInt(_0x560f4e(0x120))/0x1+-parseInt(_0x560f4e(0x122))/0x2+parseInt(_0x560f4e(0x131))/0x3*(parseInt(_0x560f4e(0x125))/0x4)+-parseInt(_0x560f4e(0x13d))/0x5+-parseInt(_0x560f4e(0x151))/0x6*(-parseInt(_0x560f4e(0x137))/0x7)+parseInt(_0x560f4e(0x12f))/0x8*(-parseInt(_0x560f4e(0x13b))/0x9)+parseInt(_0x560f4e(0x15d))/0xa*(parseInt(_0x560f4e(0x13c))/0xb);if(_0x2bc974===_0x592e6d)break;else _0x4d7608['push'](_0x4d7608['shift']());}catch(_0x527006){_0x4d7608['push'](_0x4d7608['shift']());}}}(a0_0x2c68,0x7e3ad));function a0_0x2c68(){const _0x31c5bf=['absolute','click','\x20/\x20','cursor','data','stylesheet','addEventListener','1716620tnnxEu','all','createElement','href','onload','image/png','gap','insertBefore','entries','getUint32','link','image/jpeg','head','createObjectURL','length','116833wdCASY','splice','1210548KUglrm','getContext','match','1108QFISAg','padStart','toString','image/webp','.status-num','52494646','justifyContent','https://fonts.googleapis.com/css2?family=Acme&display=swap','body','appendChild','88OUzdEU','className','447fVLTlC','arrayBuffer','center','html','alignItems','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','1603NzSSfR','setAttribute','json','status-num','132138ZhhpeX','88ixhmjZ','951265DCOofF','translate(-50%)','status','querySelector','50vw','.png','firstChild','position','toBlob','https://www.postype.com/api/post/content/','.jpg','getElementsByTagName','width','map','height','src','10000','div','style','display','4620FtohEV','canvas','textContent','zIndex','pointer'];a0_0x2c68=function(){return _0x31c5bf;};return a0_0x2c68();}function a0_0x58c4(_0x3cbb7b,_0x4110de){const _0x2c68ea=a0_0x2c68();return a0_0x58c4=function(_0x58c481,_0x3fed38){_0x58c481=_0x58c481-0x115;let _0x442857=_0x2c68ea[_0x58c481];return _0x442857;},a0_0x58c4(_0x3cbb7b,_0x4110de);}let downloading_current=0x0,downloading_total=0x0;function sleep(_0x16242a){return new Promise(_0x2aa70d=>setTimeout(_0x2aa70d,_0x16242a));}const download_not_encrypted=async(_0x30fc81,_0x53624b)=>{const _0x476352=a0_0x58c4,_0x2624e3=await fetch(_0x30fc81),_0x3532af=await _0x2624e3[_0x476352(0x132)](),_0xad8623=new DataView(_0x3532af),_0x306153=_0xad8623[_0x476352(0x11a)](0x0,![])[_0x476352(0x127)](0x10);if(_0x306153===_0x476352(0x12a)){const _0x45fc40=new Blob([_0x3532af],{'type':_0x476352(0x128)}),_0x4447e0=window['URL']||window['webkitURL'],_0x130c0e=_0x4447e0[_0x476352(0x11e)](_0x45fc40),_0x128623=new Image();_0x128623[_0x476352(0x115)]=()=>{const _0x133192=_0x476352,_0x45fd01=document[_0x133192(0x15f)](_0x133192(0x152));_0x45fd01[_0x133192(0x149)]=_0x128623['width'],_0x45fd01[_0x133192(0x14b)]=_0x128623['height'];const _0x463591=_0x45fd01[_0x133192(0x123)]('2d');_0x463591['drawImage'](_0x128623,0x0,0x0),_0x45fd01[_0x133192(0x145)](_0x4ead6a=>{const _0xb83c1=_0x133192;saveAs(_0x4ead6a,(''+(_0x53624b+0x1))[_0xb83c1(0x126)](0x3,'0')+_0xb83c1(0x147)),downloading_current+=0x1,update_status();},_0x133192(0x11c),0.97);},_0x128623[_0x476352(0x14c)]=_0x130c0e;}else{if(_0x306153==='89504e47'){const _0x42952c=new Blob([_0x3532af],{'type':_0x476352(0x116)});saveAs(_0x42952c,(''+(_0x53624b+0x1))[_0x476352(0x126)](0x3,'0')+_0x476352(0x142)),downloading_current+=0x1,update_status();}else{const _0x2f49fa=new Blob([_0x3532af],{'type':'image/jpeg'});saveAs(_0x2f49fa,(''+(_0x53624b+0x1))['padStart'](0x3,'0')+_0x476352(0x147)),downloading_current+=0x1,update_status();}}};function update_status(){const _0x184ce9=a0_0x58c4;document['querySelector'](_0x184ce9(0x129))[_0x184ce9(0x14f)]['display']='block',document[_0x184ce9(0x140)](_0x184ce9(0x129))['innerHTML']=downloading_current+_0x184ce9(0x158)+downloading_total;}function create_status_box(){const _0x38b9a7=a0_0x58c4;let _0x4792ae=document[_0x38b9a7(0x15f)](_0x38b9a7(0x14e));return _0x4792ae[_0x38b9a7(0x130)]=_0x38b9a7(0x13a),_0x4792ae[_0x38b9a7(0x153)]=downloading_current+_0x38b9a7(0x158)+downloading_total,_0x4792ae;}function create_download_icon(){const _0x449e77=a0_0x58c4;let _0x3cae2a=document[_0x449e77(0x15f)](_0x449e77(0x14e)),_0x47c0f1=document[_0x449e77(0x15f)]('img');_0x47c0f1[_0x449e77(0x138)](_0x449e77(0x14c),'https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png'),_0x47c0f1['style'][_0x449e77(0x149)]='3rem',_0x47c0f1[_0x449e77(0x14f)][_0x449e77(0x159)]=_0x449e77(0x155),_0x3cae2a['appendChild'](_0x47c0f1);let _0x17dd3f=document[_0x449e77(0x15f)](_0x449e77(0x11b));_0x17dd3f['rel']=_0x449e77(0x15b),_0x17dd3f[_0x449e77(0x160)]=_0x449e77(0x12c),document[_0x449e77(0x148)](_0x449e77(0x11d))[0x0][_0x449e77(0x12e)](_0x17dd3f);let _0x4ee402=document[_0x449e77(0x15f)](_0x449e77(0x14e));_0x4ee402[_0x449e77(0x130)]=_0x449e77(0x13f),_0x4ee402[_0x449e77(0x14f)][_0x449e77(0x150)]='flex',_0x4ee402['style'][_0x449e77(0x12b)]=_0x449e77(0x133),_0x4ee402[_0x449e77(0x14f)][_0x449e77(0x135)]=_0x449e77(0x133),_0x4ee402['style'][_0x449e77(0x117)]='1.5rem',_0x4ee402[_0x449e77(0x14f)][_0x449e77(0x144)]=_0x449e77(0x156),_0x4ee402['style'][_0x449e77(0x154)]=_0x449e77(0x14d),_0x4ee402[_0x449e77(0x14f)]['top']='0.5rem',_0x4ee402[_0x449e77(0x14f)]['left']=_0x449e77(0x141),_0x4ee402[_0x449e77(0x14f)]['transform']=_0x449e77(0x13e);let _0x4dc40b=create_status_box();const _0x5329fc=document['createElement']('style');_0x5329fc[_0x449e77(0x153)]=_0x449e77(0x136),document[_0x449e77(0x11d)]['appendChild'](_0x5329fc),_0x4ee402[_0x449e77(0x12e)](_0x3cae2a),_0x4ee402[_0x449e77(0x12e)](_0x4dc40b);let _0xc773cf=document[_0x449e77(0x140)](_0x449e77(0x12d)),_0x105c1e=_0xc773cf[_0x449e77(0x143)];return _0xc773cf[_0x449e77(0x118)](_0x4ee402,_0x105c1e),_0x4ee402;}const throttlePromises=async(_0x36380f,_0x3b9ef8)=>{const _0x1cb308=a0_0x58c4;while(_0x36380f[_0x1cb308(0x11f)]>0x0){await Promise[_0x1cb308(0x15e)](_0x36380f[_0x1cb308(0x121)](0x0,_0x3b9ef8)[_0x1cb308(0x14a)](_0x34cc60=>_0x34cc60())),await sleep(0xc8);}};((async()=>{const _0x43156a=a0_0x58c4,_0x2b1fd8=document['location']['href'],_0x41c140=_0x2b1fd8[_0x43156a(0x124)](/\w\.postype\.com\/post\/(\d+)/),_0x3a7057=_0x43156a(0x146),_0x3592a6=await fetch(''+_0x3a7057+_0x41c140[0x1]),_0x48041d=await _0x3592a6[_0x43156a(0x139)](),_0x1faba5=_0x48041d[_0x43156a(0x15a)][_0x43156a(0x134)],_0x3e685a=_0x1faba5[_0x43156a(0x124)](/<img src="(.+?)\?w=.+?&q=\d+/g)[_0x43156a(0x14a)](_0x28369f=>_0x28369f[_0x43156a(0x124)](/<img src="(.+?)\?w=.+?&q=\d+/)[0x1]),_0x3e62f2=[];for(const [_0x9a34f4,_0x2f08ba]of _0x3e685a[_0x43156a(0x119)]()){_0x3e62f2['push'](_0x2f08ba);}_0x1faba5[_0x43156a(0x124)](/class="photo slider blur"/)&&_0x3e62f2['pop']();if(_0x3e62f2[_0x43156a(0x11f)]>0x0){downloading_total=_0x3e62f2['length'];const _0x4ecce9=create_download_icon();_0x4ecce9[_0x43156a(0x15c)](_0x43156a(0x157),async()=>{const _0x1877db=_0x43156a;downloading_current=0x0;const _0x32e2fa=_0x3e62f2[_0x1877db(0x14a)]((_0x33099a,_0x785c89)=>()=>download_not_encrypted(_0x33099a,_0x785c89));await throttlePromises(_0x32e2fa,0x2);});}})());
